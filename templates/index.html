<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cogni IA</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIA..." type="image/png">
</head>
<body>
    <header>
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIA..." alt="Cogni IA" class="logo">
        <h1>Cogni IA</h1>
        <p>InteligÃªncia Artificial para todas as suas perguntas</p>
    </header>

    <main>
        <div id="chat-container">
            {% for msg in historico %}
                <div class="message {{ 'user' if msg.role == 'user' else 'bot' }}">
                    <div class="content">{{ msg.content }}</div>
                </div>
            {% endfor %}
        </div>

        <form action="/enviar" method="post" id="form">
            <input type="text" name="pergunta" placeholder="Digite sua mensagem..." required autocomplete="off">
            <button type="submit">Enviar</button>
        </form>
    </main>

    <script>
        const lastBotMessage = document.querySelector('.bot:last-child .content');
        if (lastBotMessage) {
            const text = lastBotMessage.innerText;
            lastBotMessage.innerText = "";
            let i = 0;
            const typingEffect = setInterval(() => {
                if (i < text.length) {
                    lastBotMessage.innerText += text.charAt(i);
                    i++;
                } else {
                    clearInterval(typingEffect);
                }
            }, 20);
        }
    </script>
</body>
</html>
